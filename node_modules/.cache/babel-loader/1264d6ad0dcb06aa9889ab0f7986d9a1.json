{"ast":null,"code":"import _regeneratorRuntime from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dh/Repositorio/DanielHott.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Game=/*#__PURE__*/function(_React$Component){_inherits(Game,_React$Component);var _super=_createSuper(Game);function Game(){var _this;_classCallCheck(this,Game);_this=_super.call(this);_this.state={category:'',question:'',correct:'',incorrectAnswers:[],time:30,isDisabled:false,assertions:0,questionNumber:0,isButtonVisible:false};_this.fetchApi=_this.fetchApi.bind(_assertThisInitialized(_this));_this.changeColor=_this.changeColor.bind(_assertThisInitialized(_this));_this.timer=_this.timer.bind(_assertThisInitialized(_this));_this.score=_this.score.bind(_assertThisInitialized(_this));_this.next=_this.next.bind(_assertThisInitialized(_this));return _this;}_createClass(Game,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchApi();this.timer();}},{key:\"fetchApi\",value:function(){var _fetchApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,questionNumber,response,data,correct,incorrect,_data$results$questio,category,question,difficulty;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://opentdb.com/api_token.php?command=request').then(function(response){return response.json();}).then(function(tokenId){return tokenId.token;});case 2:token=_context.sent;questionNumber=this.state.questionNumber;_context.next=6;return fetch(\"https://opentdb.com/api.php?amount=5&token=\".concat(token));case 6:response=_context.sent;_context.next=9;return response.json();case 9:data=_context.sent;correct=data.results[questionNumber].correct_answer;incorrect=data.results[questionNumber].incorrect_answers;incorrect.push(correct);incorrect.sort();_data$results$questio=data.results[questionNumber],category=_data$results$questio.category,question=_data$results$questio.question,difficulty=_data$results$questio.difficulty;this.setState({category:category,question:question,correct:correct,difficulty:difficulty,incorrectAnswers:_toConsumableArray(incorrect),renderGame:false});case 16:case\"end\":return _context.stop();}}},_callee,this);}));function fetchApi(){return _fetchApi.apply(this,arguments);}return fetchApi;}()},{key:\"changeColor\",value:function changeColor(){var wrongs=document.querySelectorAll('.wrong');var correct=document.querySelector('.correct');wrongs.forEach(function(element){element.style.border='3px solid rgb(255, 0, 0)';});correct.style.border='3px solid rgb(6, 240, 15)';this.setState({isButtonVisible:true});}},{key:\"timer\",value:function timer(){var _this2=this;var time=this.state.time;var mil=1000;if(time!==0){setInterval(function(){_this2.setState(function(prevState){if(prevState.time>0){return{time:prevState.time-1};}});},mil);}}},{key:\"score\",value:function score(){var assertions=this.state.assertions;var actAssertion=assertions+1;this.setState({assertions:actAssertion});}},{key:\"next\",value:function next(){var _this$state=this.state,questionNumber=_this$state.questionNumber,assertions=_this$state.assertions;var four=4;if(questionNumber<four){var actNumber=questionNumber+1;this.setState({questionNumber:actNumber,isButtonVisible:false,time:30,renderGame:true});this.fetchApi();}else if(questionNumber===four){return alert(\"Sua pontua\\xE7\\xE3o foi:\".concat(assertions));}}},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,incorrectAnswers=_this$state2.incorrectAnswers,correct=_this$state2.correct,question=_this$state2.question,category=_this$state2.category,time=_this$state2.time,isDisabled=_this$state2.isDisabled,isButtonVisible=_this$state2.isButtonVisible;var innerHTML=function innerHTML(text){return{__html:text};};return incorrectAnswers.length>0?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"section\",{id:\"game\",children:[/*#__PURE__*/_jsxs(\"h4\",{\"data-testid\":\"question-category\",children:[category,\": \"]}),/*#__PURE__*/_jsx(\"h4\",{\"data-testid\":\"question-text\",dangerouslySetInnerHTML:innerHTML(question)}),incorrectAnswers.map(function(alternative,index){if(alternative===correct){return/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:isDisabled,id:\"correct-answer\",onClick:function onClick(){_this3.changeColor();_this3.score();},className:\"correct\",dangerouslySetInnerHTML:innerHTML(correct)},correct);}else if(alternative!==correct){return/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:isDisabled,\"data-testid\":\"wrong-answer-\".concat(index),onClick:_this3.changeColor,className:\"wrong\",dangerouslySetInnerHTML:innerHTML(alternative)},alternative);}}),isButtonVisible&&/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"btn-next\",type:\"button\",onClick:this.next,children:\"Pr\\xF3xima\"}),time]})}):/*#__PURE__*/_jsx(\"p\",{id:\"load\",children:\"Loading\"});}}]);return Game;}(React.Component);export default Game;","map":{"version":3,"sources":["/home/dh/Repositorio/DanielHott.github.io/src/components/game.jsx"],"names":["React","Game","state","category","question","correct","incorrectAnswers","time","isDisabled","assertions","questionNumber","isButtonVisible","fetchApi","bind","changeColor","timer","score","next","fetch","then","response","json","tokenId","token","data","results","correct_answer","incorrect","incorrect_answers","push","sort","difficulty","setState","renderGame","wrongs","document","querySelectorAll","querySelector","forEach","element","style","border","mil","setInterval","prevState","actAssertion","four","actNumber","alert","innerHTML","text","__html","length","map","alternative","index","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\n\nclass Game extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      category: '',\n      question: '',\n      correct: '',\n      incorrectAnswers: [],\n      time: 30,\n      isDisabled: false,\n      assertions: 0,\n      questionNumber: 0,\n      isButtonVisible: false,\n    };\n\n    this.fetchApi = this.fetchApi.bind(this);\n    this.changeColor = this.changeColor.bind(this);\n    this.timer = this.timer.bind(this);\n    this.score = this.score.bind(this);\n    this.next = this.next.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchApi();\n    this.timer();\n  }\n\n  async fetchApi() {\n    const token = await fetch('https://opentdb.com/api_token.php?command=request')\n    .then((response) => response.json())\n    .then((tokenId) => tokenId.token);\n    const { questionNumber } = this.state;\n    const response = await fetch(`https://opentdb.com/api.php?amount=5&token=${token}`);\n    const data = await response.json();\n    const correct = data.results[questionNumber].correct_answer;\n    const incorrect = data.results[questionNumber].incorrect_answers;\n    incorrect.push(correct);\n    incorrect.sort();\n    const { category, question, difficulty } = data.results[questionNumber];\n    this.setState({\n      category,\n      question,\n      correct,\n      difficulty,\n      incorrectAnswers: [...incorrect],\n      renderGame: false,\n    });\n  }\n\n  changeColor() {\n    const wrongs = document.querySelectorAll('.wrong');\n    const correct = document.querySelector('.correct');\n    wrongs.forEach((element) => { element.style.border = '3px solid rgb(255, 0, 0)'; });\n    correct.style.border = '3px solid rgb(6, 240, 15)';\n    this.setState({ isButtonVisible: true });\n  }\n\n  timer() {\n    const { time } = this.state;\n    const mil = 1000;\n    if (time !== 0) {\n      setInterval(() => {\n        this.setState((prevState) => {\n          if (prevState.time > 0) {\n            return ({ time: prevState.time - 1 });\n          }\n        });\n      }, mil);\n    }\n  }\n\n  score() {\n    const { assertions } = this.state;\n    const actAssertion = assertions + 1;\n    this.setState({ assertions: actAssertion });\n}\n\n  next() {\n    const { questionNumber, assertions } = this.state;\n    const four = 4;\n    if (questionNumber < four) {\n      const actNumber = questionNumber + 1;\n      this.setState({ questionNumber: actNumber,\n        isButtonVisible: false,\n        time: 30,\n        renderGame: true });\n      this.fetchApi();\n    } else if (questionNumber === four) {\n      return (alert(`Sua pontuação foi:${assertions}`));\n    }\n  }\n\n  render() {\n    const { incorrectAnswers, correct,\n      question, category, time, isDisabled, isButtonVisible } = this.state;\n      const innerHTML = (text) => ({\n        __html: text,\n      })\n    return (\n        (incorrectAnswers.length > 0) ? (\n        <div>\n          <section id=\"game\">\n            <h4 data-testid=\"question-category\">{ category }: </h4>\n            <h4 data-testid=\"question-text\" dangerouslySetInnerHTML={innerHTML(question)}>\n            </h4>\n            {incorrectAnswers.map((alternative, index) => {\n                if (alternative === correct) {\n                     return (<button\n                    type=\"button\"\n                    key={ correct }\n                    disabled={ isDisabled }\n                    id=\"correct-answer\"\n                    onClick={ () => {\n                      this.changeColor();\n                      this.score();\n                    } }\n                    className=\"correct\"\n                    dangerouslySetInnerHTML={innerHTML(correct)}\n                  >\n                  </button>)\n                } else if (alternative !== correct) {\n              return (<button\n                type=\"button\"\n                key={ alternative }\n                disabled={ isDisabled }\n                data-testid={ `wrong-answer-${index}` }\n                onClick={ this.changeColor }\n                className=\"wrong\"\n                dangerouslySetInnerHTML={innerHTML(alternative)}\n              >\n              </button>)}})}\n            { isButtonVisible\n            && (\n              <button data-testid=\"btn-next\" type=\"button\" onClick={ this.next }>\n                Próxima\n              </button>)}\n            { time }\n          </section>\n        </div>\n        ): <p id=\"load\">Loading</p>\n    );\n  }\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}